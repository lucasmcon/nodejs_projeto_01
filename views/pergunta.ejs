<%- include partials/header.ejs %>
<body>
    <%- include partials/navbar.ejs %>
    <div class="container">
        <hr>
        <h1><%= pergunta.id+"."+pergunta.per_st_tit %></h1>
        <p><%= pergunta.per_st_desc %></p>
        <hr>
        <form method="POST" action="/responder">
            <h3>Responda</h3>
            <label>Resposta:</label>
            <textarea placeholder="Digite sua resposta" class="form-control" name="res_st_desc"></textarea><br>
            <input type="hidden" name="per_in_id" value="<%= pergunta.id %>">
            <button type="submit" class="btn btn-info">Responder</button>
        </form>
        <hr>
        <h3>Respostas</h3>
        <hr>
        <% respostas.forEach(resposta => {%>
            <br>
            <div class="card">
                <div class="card-body">
                    <p><%= resposta.res_st_desc %></p>
                </div>
                <div class="card-footer">
                    <p>Data da resposta:<div class="dataFormatada"><%= resposta.createdAt %></div></p>
                </div>
            </div>
        <% }) %>
    </div>
    <script>
        var sd = document.getElementsByClassName('dataFormatada');
        
        for(var i = 0; i < sd.length; i++){
            var element = sd[i]; var d = element.innerHTML;
            var d = new Date(d); var options = { hour: 'numeric', minute: 'numeric' };

            element.innerHTML = d.toLocaleDateString("pt-BR", options);

        }
        /*
        var dataDiv = document.getElementById('dataFormatada');
        var dataRaw = document.getElementById('dataFormatada').innerHTML;
        var data = new Date(dataRaw);
        var dataFormatada = data.toLocaleDateString();
        dataDiv.innerHTML = dataFormatada;
        */
    </script>
</body>
<%- include partials/footer.ejs %>
